{% extends 'base_blog.html' %}

{% block extra_blog_head %}

{% endblock %}

{% block extra_blog_body %}
    <div class="container">
        {% for post in posts %}
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3><a href="{% url 'blog:post_page' post_id=post.id%}">{{ post.title }}</a></h3>
                </div>
                <div class="panel-body ">
                    {{ post.content|safe|truncatewords_html:50 }}
                </div>
                <div class="panel-footer text-right">
                        {% for post_tag in post.posttags_set.all %}
                            <a href="{% url 'blog:tags_page' tag_id=post_tag.tag.id %}">
                                {{ post_tag.tag }}
                            </a>/
                        {% endfor %}
                    {{ post.created }} ({{ post.modified }})
                    {% if is_superuser %}
                        {% if post.published %}
                            <span class="label label-success">Опубликован</span>
                        {% else %}
                            <span class="label label-warning">Скрыт</span>
                        {% endif %}
                        <a type="button"
                           class="btn btn-info"
                           href="{% url 'blog:posts_edit' post_id=post.id %}">
                            Редактировать
                        </a>
                        <a type="button"
                           class="btn btn-danger"
                           href="{% url 'blog:posts_delete' post_id=post.id %}">
                            Удалить
                        </a>
                    {% endif %}

                </div>
            </div>
        {% endfor %}

        <nav>
            <ul class="pager">
                <li class="previous {% if not posts.has_previous %}disabled{% endif %}">
                    <a href="{% if posts.has_previous %}?page={{ posts.previous_page_number }}{% endif %}">
                        <span aria-hidden="true">&larr;</span>
                        Новые
                    </a>
                </li>
                <li class="next {% if not posts.has_next %}disabled{% endif %}">
                    <a href="{% if posts.has_next %}?page={{ posts.next_page_number }}{% endif %}">
                        Старые
                        <span aria-hidden="true">&rarr;</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
{% endblock %}